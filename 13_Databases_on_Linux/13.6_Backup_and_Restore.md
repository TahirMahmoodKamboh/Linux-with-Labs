# Database Backup and Restore

## MySQL/MariaDB
- Backup:
```bash
mysqldump -u root -p testdb > testdb_backup.sql
```
- Restore:
```bash
mysql -u root -p testdb < testdb_backup.sql
```

## PostgreSQL
- Backup:
```bash
pg_dump testdb > testdb_backup.sql
```
- Restore:
```bash
psql testdb < testdb_backup.sql
```

---

## Lab
1. Write a script to back up a PostgreSQL database to a file.
2. Write a script to back up a MySQL database to a file.
3. Write a script to back up a Redis database.
4. Write a script to restore a database from a backup file (any type).

---

## Solutions

1. PostgreSQL Backup Script
```bash
#!/bin/bash
DBNAME="testdb"
BACKUP="${DBNAME}_$(date +%F).sql"
pg_dump $DBNAME > $BACKUP
echo "PostgreSQL backup saved to $BACKUP"
```

2. MySQL Backup Script
```bash
#!/bin/bash
DBNAME="testdb"
USER="root"
BACKUP="${DBNAME}_$(date +%F).sql"
mysqldump -u $USER -p $DBNAME > $BACKUP
echo "MySQL backup saved to $BACKUP"
```

3. Redis Backup Script
```bash
#!/bin/bash
# Trigger a manual save
redis-cli save
# Copy the dump.rdb file to a backup location
cp /var/lib/redis/dump.rdb "/var/lib/redis/dump_$(date +%F).rdb"
echo "Redis backup saved as dump_$(date +%F).rdb"
```

4. Restore: See the commands above for each database type.