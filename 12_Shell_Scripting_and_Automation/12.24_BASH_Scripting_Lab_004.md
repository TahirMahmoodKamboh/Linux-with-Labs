# Functions in BASH scripts

Let’s go **step by step** with Bash **functions**. We will learn **simple examples first**, then **advanced ones**, with real-world relevance.

---

# **1️⃣ Simple Bash Functions**

### **Syntax**

```bash
function_name() {
    commands
}
```

or

```bash
function function_name {
    commands
}
```

* Call the function by writing its **name**: `function_name`
* Functions can **use variables** from the script or **local variables**

---

### **Example 1: Say Hello**

```bash
#!/bin/bash

say_hello() {
    echo "Hello, World!"
}

say_hello
```

**Output:**

```
Hello, World!
```

---

### **Example 2: Add Two Numbers**

```bash
#!/bin/bash

add_numbers() {
    sum=$(( $1 + $2 ))
    echo "Sum is $sum"
}

add_numbers 5 7
```

**Output:**

```
Sum is 12
```

✅ **Explanation:**

* `$1` and `$2` → arguments passed to the function
* Functions can **return values via `echo`**

---

### **Example 3: Using Local Variables**

```bash
#!/bin/bash

greet() {
    local name=$1
    echo "Hello, $name!"
}

greet "Alice"
```

**Output:**

```
Hello, Alice!
```

**Tip:** `local` makes the variable **visible only inside the function**

---

# **2️⃣ Advanced Bash Functions**

### **Example 4: Check if File Exists**

```bash
#!/bin/bash

check_file() {
    local file=$1
    if [ -f "$file" ]; then
        echo "$file exists."
    else
        echo "$file does not exist."
    fi
}

check_file "/etc/passwd"
check_file "nofile.txt"
```

**Output:**

```
/etc/passwd exists.
nofile.txt does not exist.
```

✅ **Explanation:**

* Real-world use: check configs, logs, files
* Can be reused multiple times

---

### **Example 5: Function Returning Status**

```bash
#!/bin/bash

is_even() {
    if [ $(( $1 % 2 )) -eq 0 ]; then
        return 0   # success (true)
    else
        return 1   # failure (false)
    fi
}

num=7
if is_even $num; then
    echo "$num is even"
else
    echo "$num is odd"
fi
```

**Output:**

```
7 is odd
```

✅ **Explanation:**

* Functions can return **status codes (0=true, non-zero=false)**
* Useful for **conditional checks**

---

### **Example 6: Function Calling Another Function**

```bash
#!/bin/bash

greet() {
    echo "Hello, $1!"
}

farewell() {
    echo "Goodbye, $1!"
}

say_both() {
    greet "$1"
    farewell "$1"
}

say_both "Bob"
```

**Output:**

```
Hello, Bob!
Goodbye, Bob!
```

✅ **Explanation:**

* Functions can **call each other**
* Helps **organize code into modular blocks**

---

### **Example 7: Functions with Command Substitution**

```bash
#!/bin/bash

get_disk_usage() {
    local usage=$(df / | tail -1 | awk '{print $5}')
    echo "$usage"
}

disk=$(get_disk_usage)
echo "Root disk usage: $disk"
```

**Output example:**

```
Root disk usage: 42%
```

✅ **Explanation:**

* Combines **functions + command substitution**
* Useful for **system scripts**

---

### **Example 8: Menu Using Functions**

```bash
#!/bin/bash

show_menu() {
    echo "1) Say Hello"
    echo "2) Show Date"
    echo "3) Exit"
}

say_hello() {
    echo "Hello, User!"
}

show_date() {
    echo "Today is $(date)"
}

while true; do
    show_menu
    read choice
    case $choice in
        1) say_hello ;;
        2) show_date ;;
        3) echo "Exiting..."; break ;;
        *) echo "Invalid choice";;
    esac
done
```

✅ **Explanation:**

* Functions make **menu scripts cleaner**
* Each function handles **one task**
* Easy to maintain or expand

---
