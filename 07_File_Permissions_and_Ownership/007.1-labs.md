# Module 7: Labs â€“ File Permissions & Ownership

## Lab 1: View File Permissions
- Check the permissions of a file and a directory.
  ```bash
  $ touch myfile.txt
  $ mkdir mydir
  $ ls -l myfile.txt mydir
  -rw-r--r-- 1 student student    0 Jan  4 10:00 myfile.txt
  drwxr-xr-x 2 student student 4096 Jan  4 10:00 mydir
  ```
**Solution:**
- `ls -l` shows file and directory permissions in symbolic form.

## Lab 2: Change Permissions with chmod
- Make a script executable and remove write permission for group/others.
  ```bash
  $ touch script.sh
  $ chmod +x script.sh
  $ ls -l script.sh
  -rwxr-xr-x 1 student student 0 Jan  4 10:01 script.sh
  $ chmod go-w script.sh
  $ ls -l script.sh
  -rwxr-xr-x 1 student student 0 Jan  4 10:01 script.sh
  ```
**Solution:**
- `chmod +x` adds execute permission; `chmod go-w` removes write for group/others.

## Lab 3: Use Numeric Permissions
- Set permissions to 600, 644, and 755 and observe the changes.
  ```bash
  $ chmod 600 myfile.txt
  $ ls -l myfile.txt
  -rw------- 1 student student 0 Jan  4 10:02 myfile.txt
  $ chmod 644 myfile.txt
  $ ls -l myfile.txt
  -rw-r--r-- 1 student student 0 Jan  4 10:02 myfile.txt
  $ chmod 755 myfile.txt
  $ ls -l myfile.txt
  -rwxr-xr-x 1 student student 0 Jan  4 10:02 myfile.txt
  ```
**Solution:**
- Numeric permissions: 600 (rw-------), 644 (rw-r--r--), 755 (rwxr-xr-x).

## Lab 4: Change Ownership and Group
- Change the owner and group of a file (requires sudo).
  ```bash
  $ sudo chown root myfile.txt
  $ sudo chgrp staff myfile.txt
  $ ls -l myfile.txt
  -rwxr-xr-x 1 root staff 0 Jan  4 10:03 myfile.txt
  ```
**Solution:**
- `chown` changes owner; `chgrp` changes group. Use `sudo` if not the owner.

## Lab 5: Special Permissions
- Set SUID, SGID, and sticky bit, then check the results.
  ```bash
  $ chmod u+s script.sh
  $ chmod g+s mydir
  $ chmod +t mydir
  $ ls -l script.sh mydir
  -rwsr-xr-x 1 student student 0 Jan  4 10:04 script.sh  # SUID (s)
  drwxr-sr-t 2 student student 4096 Jan  4 10:04 mydir   # SGID (s) and sticky (t)
  ```
**Solution:**
- `chmod u+s` sets SUID, `chmod g+s` sets SGID, `chmod +t` sets sticky bit. `ls -l` shows s and t in the permissions.

## Lab 6: Recursive Permission Changes
- Change permissions for all files in a directory recursively.
  ```bash
  $ mkdir -p testdir/subdir
  $ touch testdir/file1 testdir/subdir/file2
  $ chmod -R 700 testdir
  $ ls -lR testdir
  testdir:
  -rwx------ 1 student student 0 Jan  4 10:10 file1
  drwx------ 2 student student 4096 Jan  4 10:10 subdir
  testdir/subdir:
  -rwx------ 1 student student 0 Jan  4 10:10 file2
  ```
**Solution:**
- `chmod -R` changes permissions recursively for all files and subdirectories.

## Lab 7: Permission Denied Scenario
- Try to read a file without permission, then fix it.
  ```bash
  $ touch secret.txt
  $ chmod 000 secret.txt
  $ cat secret.txt
  cat: secret.txt: Permission denied
  $ chmod 644 secret.txt
  $ cat secret.txt
  # (empty output)
  ```
**Solution:**
- `chmod 000` removes all permissions; `cat` fails. `chmod 644` restores read/write for owner, read for others.

## Lab 8: Directory Execute Bit
- Remove execute bit from a directory and see the effect.
  ```bash
  $ mkdir nodir
  $ chmod -x nodir
  $ ls nodir
  ls: cannot open directory 'nodir': Permission denied
  $ chmod +x nodir
  $ ls nodir
  # (shows contents, if any)
  ```
**Solution:**
- Without execute bit, you cannot access directory contents. Restoring it allows access again.

---
